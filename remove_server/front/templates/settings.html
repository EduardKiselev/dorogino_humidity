<!-- templates/settings.html -->
{% extends "base.html" %}

{% block title %}Настройки{% endblock %}

{% block content %}
<h2>⚙️ Настройки системы управления влажностью</h2>

<div class="card">
    <div class="card-body">
        <form method="post">
            <div class="mb-3">
                <label class="form-label"><strong>Порог влажности (%)</strong></label>
                <input type="number" class="form-control" name="humidity_threshold" 
                       value="{{ "%.1f"|format(settings.humidity_threshold) }}" 
                       min="0" max="100" step="0.1" required>
                <div class="form-text">
                    При превышении этого значения увлажнитель будет отключаться
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label"><strong>Гистерезис (%)</strong></label>
                <input type="number" class="form-control" name="hysteresis" 
                       value="{{ "%.1f"|format(settings.hysteresis) }}" 
                       min="0" max="20" step="0.1" required>
                <div class="form-text">
                    Разница между включением и выключением. Например, при пороге 60% и гистерезисе 5%:
                    включение при 55%, выключение при 60%
                </div>
            </div>

            <div class="alert alert-info">
                <strong>Текущие значения:</strong><br>
                Включение: <strong>{{ "%.1f"|format(settings.humidity_threshold - settings.hysteresis) }}%</strong><br>
                Выключение: <strong>{{ "%.1f"|format(settings.humidity_threshold) }}%</strong>
            </div>

            <button type="submit" class="btn btn-success">Сохранить настройки</button>
        </form>
    </div>
</div>
{% endblock %}